<!DOCTYPE html>
<html lang="{{ app.request.getLocale() }}">
<head>
    <!-- Title -->
    <title>{{ 'OrbitronDev Cloud'|trans }}</title>

    <!-- Required Meta Tags Always Come First -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="{% block description %}The official site of OrbitronDev. Containing all projects and everything about us.{% endblock %}" />
    <meta name="author" content="OrbitronDev" />
    <meta name="publisher" content="OrbitronDev" />
    <meta name="copyright" content="OrbitronDev &copy; 2013-2017" />
    <meta name="keywords" content="" />
    <meta name="audience" content="Alle" />
    <meta name="robots" content="INDEX,FOLLOW" />

    <!-- Favicon -->
    {% include 'default/_favicon.html.twig' %}

    <!-- Section CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <!-- elFinder CSS (REQUIRED) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30/css/elfinder.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30/css/theme.min.css" />
</head>
<body>
<main role="main">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="{{ path('app_cloud_files') }}">
            {{ 'OrbitronDev Cloud'|trans }}
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="{{ 'Toggle navigation'|trans }}">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{{ path('app_cloud_files') }}">{{ 'Files'|trans }}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ path('app_cloud_share') }}">{{ 'Share'|trans }}</a>
                </li>
                {% if current_user.id > -1 %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="{{ path('app_account_user', {'username': current_user.username}) }}" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="img-circle" src="{{ path('app_account_api', {'function': 'get_img', 'user_id': current_user.id, 'height': 20, 'width': 20}) }}" />
                            {{ current_user.username }}
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="{{ path('app_account_user', {'username': current_user.username}) }}">{{ 'Profile'|trans }}</a>
                            <a class="dropdown-item" href="{{ path('app_account_panel', {'page': 'home'}) }}">{{ 'Settings'|trans }}</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{{ path('app_account_logout') }}">{{ 'Logout'|trans }}</a>
                        </div>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a href="{{ path('app_account_login', {'redir': app.request.uri}) }}">{{ 'header.account.login'|trans }}</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ path('app_account_register') }}">{{ 'header.account.register'|trans }}</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Element where elFinder will be created (REQUIRED) -->
        <div id="elfinder"></div>
    </div>
</main>

<!-- Section JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.6/SmoothScroll.min.js"></script>

<!-- elFinder JS (REQUIRED) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30/js/elfinder.min.js"></script>

<!-- Extra contents editors (OPTIONAL) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30/js/extras/editors.default.min.js"></script>

<!-- GoogleDocs Quicklook plugin for GoogleDrive Volume (OPTIONAL) -->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30/js/extras/quicklook.googledocs.min.js"></script>-->

<!-- elFinder initialization (REQUIRED) -->
<script>
    // Documentation for client options:
    // https://github.com/Studio-42/elFinder/wiki/Client-configuration-options
    $(document).ready(function () {
        $('#elfinder').elfinder(
            // 1st Arg - options
            {
                cssAutoLoad: false,               // Disable CSS auto loading
                baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/elfinder/2.1.30', // Base URL to css/*, js/*
                url: '{{ path('app_cloud_connector') }}' // connector URL (REQUIRED)
                // , lang: 'ru'                    // language (OPTIONAL)
            },
            // 2nd Arg - before boot up function
            function (fm, extraObj) {
                // `init` event callback function
                fm.bind('init', function () {
                    // Optional for Japanese decoder "extras/encoding-japanese.min"
                    delete fm.options.rawStringDecoder;
                    if (fm.lang === 'jp') {
                        fm.loadScript(
                            [fm.baseUrl + 'js/extras/encoding-japanese.min.js'],
                            function () {
                                if (window.Encoding && Encoding.convert) {
                                    fm.options.rawStringDecoder = function (s) {
                                        return Encoding.convert(s, {to: 'UNICODE', type: 'string'});
                                    };
                                }
                            },
                            {loadType: 'tag'}
                        );
                    }
                });
                // Optional for set document.title dynamically.
                var title = document.title;
                fm.bind('open', function () {
                    var path = '',
                        cwd = fm.cwd();
                    if (cwd) {
                        path = fm.path(cwd.hash) || null;
                    }
                    document.title = path ? title + ' - ' + path : title;
                }).bind('destroy', function () {
                    document.title = title;
                });
            }
        );
    });
</script>

<!--[if lt IE 9]>
<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
</body>
</html>
